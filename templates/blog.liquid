{% assign pages = page.children_in_list %}
{% assign thumb = 'images/theme/blog.png' | asset_url %}
{% assign avatar_url = 'images/avatar.svg' | asset_url %}

<div class="bg-accent/30 dark:bg-slate-700">
  <div class="py-4 mx-auto max-w-7xl truncate">
    {% render 'breadcrumb', breadcrumb: page.breadcrumb %}
  </div>
</div>

<!-- Page header -->
<div class="px-4 pt-6 mx-auto max-w-7xl sm:px-4">
  <div class="flex items-center space-x-1">
    {% if page.settings.icon %}
      <span class="relative mr-2 w-12 h-12 rounded-full bg-secondary/20">
        <img src="{{ page.settings.icon }}" class="h-10"/>
      </span>
    {% endif %}
    <span class="block text-2xl font-bold text-primary md:text-4xl">{{ page.settings.title }}</span>
  </div>
  <h1 class="mt-3 text-sm font-bold text-slate-600">{{ page.settings.description }}</h1>
</div>
<!--/ Page header -->

<div class="relative">
  <div class="px-2 mx-auto mb-8 max-w-7xl lg:px-4">
    <div class="">
      {%# 分页 %}
      {% paginate_tag pages, per: 24 %}
        <div class="grid grid-cols-1 gap-x-8 gap-y-10 mx-auto mt-16 max-w-2xl lg:mx-0 lg:max-w-none lg:grid-cols-3">
          {% for sub_page in pages %}
            <article class="flex flex-col">
              {%- if page.settings.is_allow_thumb -%}
                <div class="relative w-full">
                  <img src="{{ sub_page.settings.thumb_image_url | default: thumb }}" alt="{{ sub_page.link_text }}"
                    class="aspect-[16/9] w-full rounded-2xl bg-gray-100 object-cover sm:aspect-[2/1] lg:aspect-[3/2]">
                  <div class="absolute inset-0 rounded-2xl ring-1 ring-inset ring-gray-900/10"></div>
                </div>
              {%- endif -%}
              <div class="max-w-xl">
                <div class="flex gap-x-2 items-center mt-2 text-xs">
                  {% for tag in sub_page.settings.tags | limit: 3 %}
                    <a href="{{ tag.path }}" class="relative z-10 px-3 py-1.5 font-medium text-gray-600 bg-gray-50 rounded-full hover:bg-gray-100">{{ tag.name }}</a>
                  {% endfor %}
                </div>
                <div class="relative group">
                  <h3 class="mt-3 text-xl font-semibold leading-6 md:text-2xl group-hover:text-gray-600">
                    <a href="{{ sub_page.path }}">
                      <span class="absolute inset-0"></span>
                      {{ sub_page.link_text }}
                    </a>
                  </h3>
                  <p class="mt-2 text-sm leading-6 text-gray-600 line-clamp-3">{{ sub_page.settings.description }}</p>
                </div>
                <div class="flex justify-between my-2">
                  <div>
                    {%- if site.settings.is_allow_author -%}
                      <div class="flex relative gap-x-2 items-center">
                        <img src="{{ page.author.avatar_url | default: avatar_url }}" alt="" class="w-6 h-6 bg-gray-100 rounded-full">
                        <div class="text-sm leading-6">
                          <p class="font-semibold">
                            <a href="javascript:void(0);">
                              <span class="absolute inset-0"></span>
                              {{ page.author.name }}
                            </a>
                          </p>
                        </div>
                      </div>
                    {%- endif -%}
                  </div>
                  <div>
                    {%- if site.settings.is_allow_published_at -%}
                      <time datetime="{{ sub_page.published_at }}" class="text-sm">{{ sub_page.published_at | date: "%Y-%m-%d" }}</time>
                    {%- endif -%}
                  </div>
                </div>

              </div>
            </article>
          {% endfor %}
        </div>
        <!-- Pagination -->
        <div class="block mt-4 w-full text-right md:mt-12">
          {% render 'paginate', paginate: paginate %}
        </div>
      {% endpaginate_tag %}
      <!-- More posts... -->
    </div>
  </div>
</div>


{% schema %}
  {
    "name": "Blog",
    "thumb_url": "images/theme/blog.png",
    "description": "博客栏目的首页",
    "sub_page_templates": ["blog", "blog_post"],
    "settings": [
      {
        "id": "title",
        "type": "text",
        "placeholder": "",
        "label": "标题"
      },
      {
        "id": "description",
        "type": "textarea",
        "label": "描述",
        "default": "A place to share our thoughts and insights"
      },
      {
          "id": "icon",
          "type": "image_picker",
          "ratio": "1:1",
          "width": 60,
          "label": "图标"
      },
      {
        "id": "is_allow_thumb",
        "type": "checkbox",
        "label": "是否展示封面",
        "default": true
      },
      {
        "id": "recommend_to_index",
        "type": "checkbox",
        "label": "推荐到首页展示",
        "default": true
      }
    ]
  }
{% endschema%}

{% assign pages = page.children_in_list | order_by: "created_at" %}
{% assign thumb = 'images/thumbnail.png' | asset_url %}
<a name="videos"></a>
{% assign avatar_url = 'images/avatar.svg' | asset_url %}

<!-- Page header -->
<div class="px-4 pt-6 mx-auto max-w-7xl sm:px-8 lg:pt-12 lg:px-12">
  <div class="flex flex-col mx-auto space-y-6 w-full max-w-7xl lg:justify-between lg:items-end lg:flex-row">
    <div class="max-w-2xl">
      <div class="flex items-center space-x-1">
        {% if page.settings.icon %}
          <span class="relative mr-2 w-12 h-12 rounded-full bg-secondary/20">
            <img src="{{ page.settings.icon }}" class="h-10"/>
          </span>
        {% endif %}
        <span class="block text-2xl font-bold text-primary md:text-4xl">{{ page.settings.title }}</span>
      </div>
      <h1 class="mt-3 text-sm font-bold text-slate-600">{{ page.settings.description }}</h1>
    </div>
  </div>
</div>
<!--/ Page header -->

<div class="relative">
  <div class="px-6 mx-auto mb-8 max-w-7xl lg:px-8">
    <div class="">
      {%# 分页 %}
      {% paginate_tag pages, per: 24 %}
        <div class="grid grid-cols-1 gap-x-8 gap-y-20 mx-auto mt-8 max-w-2xl lg:mx-0 lg:max-w-none sm:grid-cols-2 lg:grid-cols-4">
          {% for sub_page in pages %}
              <article class="flex flex-col justify-between items-start rounded-xl border">
                <div class="flex relative flex-col justify-center items-center w-full">
                  {% render 'play_video', page: sub_page, thumb: thumb %}
                </div>
                <div class="px-2 w-full">

                  <div class="relative group">
                    <h3 class="mt-2 text-lg font-semibold leading-6 line-clamp-2 group-hover:text-gray-600">
                      <a href="{{ sub_page.path }}">
                        <span class="absolute inset-0"></span>
                        {{ sub_page.link_text }}
                      </a>
                    </h3>
                  </div>
                  <div class="flex justify-between my-2">
                    <div>
                      {%- if site.settings.is_allow_author -%}
                        <div class="flex relative gap-x-2 items-center">
                          <img src="{{ page.author.avatar_url | default: avatar_url }}" alt="" class="w-6 h-6 bg-gray-100 rounded-full">
                          <div class="text-sm leading-6">
                            <p class="font-semibold">
                              <a href="javascript:void(0);">
                                <span class="absolute inset-0"></span>
                                {{ page.author.name }}
                              </a>
                            </p>
                          </div>
                        </div>
                      {%- endif -%}
                    </div>
                    <div>
                      {%- if site.settings.is_allow_published_at -%}
                        <time datetime="{{ sub_page.published_at }}" class="text-sm">{{ sub_page.published_at | date: "%Y-%m-%d" }}</time>
                      {%- endif -%}
                    </div>
                  </div>
                </div>
              </article>
          {% endfor %}
        </div>
        <!-- Pagination -->
        <div class="block mt-12 w-full text-right">
          {% render 'paginate', paginate: paginate %}
        </div>
      {% endpaginate_tag %}
      <!-- More posts... -->
    </div>
  </div>
</div>


{% schema %}
  {
    "name": "Videos",
    "thumb_url": "images/theme/videos.png",
    "description": "视频栏目的首页",
    "sub_page_templates": ["video_detail"],
    "settings": [
      {
        "id": "title",
        "type": "text",
        "placeholder": "",
        "label": "标题"
      },
      {
        "id": "description",
        "type": "textarea",
        "label": "描述"
      },
      {
        "id": "icon",
        "type": "image_picker",
        "ratio": "1:1",
        "width": 60,
        "label": "图标"
      },
      {
        "id": "video_type",
        "type": "radio",
        "label": "视频格式",
        "choices": [{"label":"桌面端宽视频（16:9）","value":"0"},{"label":"手机端长视频（9:16）","value":"1"}],
        "default": "0",
        "info": "* 在子页面上传的视频封面尺寸也应该按当前选择的尺寸适配"
      },
      {
        "id": "recommend_to_index",
        "type": "checkbox",
        "label": "推荐到首页展示",
        "default": true
      }
    ]
  }
{% endschema%}
